---
sidebar: sidebar 
permalink: task-install-connector-aws.html 
keywords: install connector, aws connector installation, aws connector, install connector in aws, bluexp, aws marketplace, manual install, create connector 
summary: コネクタは、BlueXPのWebベースのコンソールやAWS Marketplaceから直接作成するか、自社のLinuxホストにインストールして作成します。 
---
= AWS でコネクタを作成します
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
コネクタは、BlueXPのWebベースのコンソールやAWS Marketplaceから直接作成するか、自社のLinuxホストにインストールして作成します。

[role="tabbed-block"]
====
.BlueXP
--
.作業を開始する前に
次の情報が必要です。

* AWS認証方式：IAMロールまたは必要な権限を持つIAMユーザのアクセスキー。
+
link:task-set-up-permissions-aws.html["AWS権限の設定方法をご確認ください"]

* ネットワーク要件を満たすVPCとサブネット。
+
link:task-set-up-networking-aws.html["ネットワーク要件について説明します"]

* EC2インスタンスのキーペア。
* コネクタからのインターネットアクセスにプロキシが必要な場合は、プロキシサーバに関する詳細。


.手順
. [Connector]*ドロップダウンをクリックし、*[Add Connector]*を選択します。
+
image:screenshot_connector_add.gif["ヘッダーのコネクターアイコンとコネクターの追加アクションを示すスクリーンショット。"]

. クラウドプロバイダとして「 * Amazon Web Services * 」を選択し、「 * Continue * 」をクリックします。
. [*コネクターの配置（Deploying a Connector *）]ページで、必要なものについて詳しく確認してください。次の 2 つのオプションがあります。
+
.. [* Continue *（続行）]をクリックして、製品ガイドを使用して導入の準備をします。製品ガイドの各手順には、このページのドキュメントに記載されている情報が含まれています。
.. このページの手順に従って準備が完了している場合は、*配備にスキップ*をクリックします。


. ウィザードの手順に従って、コネクタを作成します。
+
** * 準備をしてください * ：必要なものを確認してください。
** * AWSクレデンシャル*：AWSリージョンを指定してから認証方式を選択します。認証方式は、BlueXPが引き受けることができるIAMロールか、AWSのアクセスキーとシークレットキーのどちらかです。
+

TIP: [*Assume Role] を選択した場合は、 Connector 展開ウィザードから最初の資格情報セットを作成できます。クレデンシャルの追加のセットは、 [Credentials] ページから作成する必要があります。ウィザードのドロップダウンリストから使用できるようになります。 link:task-adding-aws-accounts.html["クレデンシャルを追加する方法について説明します"]。

** * 詳細 * ：コネクタの詳細を入力します。
+
*** インスタンスの名前を入力します。
*** カスタムタグ（メタデータ）をインスタンスに追加します。
*** 必要な権限を持つ新しいロールを作成するか、で設定した既存のロールを選択するかを選択します link:reference-permissions-aws.html["必要な権限"]。
*** コネクタの EBS ディスクを暗号化するかどうかを選択します。デフォルトの暗号化キーを使用することも、カスタムキーを使用することもできます。


** * ネットワーク * ：インスタンスに VPC 、サブネット、キーペアを指定し、パブリック IP アドレスを有効にするかどうかを選択し、必要に応じてプロキシ設定を指定します。
+
コネクタで使用する正しいキーペアがあることを確認します。キーペアがないと、Connector仮想マシンにアクセスできません。

** *セキュリティグループ*:新しいセキュリティグループを作成するか、必要なインバウンドおよびアウトバウンドルールを許可する既存のセキュリティグループを選択するかを選択します。
+
link:reference-ports-aws.html["AWSのセキュリティグループルールを表示します"]。

** * 復習 * ：選択内容を確認して、設定が正しいことを確認してください。


. [ 追加（ Add ） ] をクリックします。
+
インスタンスの準備が完了するまでに約 7 分かかります。処理が完了するまで、ページには表示されたままにしておいてください。



.結果
プロセスが完了すると、BlueXPからコネクタを使用できるようになります。

--
.AWS Marketplace
--
.作業を開始する前に
次の情報が必要です。

* ネットワーク要件を満たすVPCとサブネット。
+
link:task-set-up-networking-aws.html["ネットワーク要件について説明します"]。

* コネクタに必要な権限を含むポリシーが添付されたIAMロール。
+
link:task-set-up-permissions-aws.html["AWS権限の設定方法をご確認ください"]。

* IAMユーザのAWS Marketplaceをサブスクライブおよびサブスクライブ解除する権限。
* インスタンスのCPUとRAMの要件を理解していること。
+
link:reference-host-requirements-aws.html["インスタンス要件を確認します"]。

* EC2インスタンスのキーペア。


.手順
. にアクセスします https://aws.amazon.com/marketplace/pp/B018REK8QG["AWS MarketplaceのBlueXPページ"^]
. [Marketplace] ページで [* Continue to Subscribe* ] をクリックし、 [* Continue to Configuration* ] をクリックします。
+
image:screenshot-subscribe-aws.png["AWS Marketplace の Continue to Subscribe and Continue to Configuration ボタンを示すスクリーンショット"]

. デフォルトのオプションを変更し、 [* Continue to Launch] をクリックします。
. [ アクションの選択 *] で [* EC2 で起動 ] を選択し、 [* 起動 *] をクリックします。
+
以下の手順では、コンソールからEC2コンソールからインスタンスを起動する方法について説明します。これは、IAMロールをコネクタインスタンスに関連付けることができるためです。これは、 * ウェブサイトからの起動 * アクションを使用しては実行できません。

. プロンプトに従って、インスタンスを設定および導入します。
+
** *名前とタグ*：インスタンスの名前とタグを入力します。
** *アプリケーションとOSイメージ*:このセクションは省略します。コネクタAMIはすでに選択されています。
** *インスタンスタイプ*：リージョンの可用性に応じて、RAMとCPUの要件を満たすインスタンスタイプを選択します（T3.xlargeを推奨）。
** *キーペア（ログイン）*：インスタンスへのセキュアな接続に使用するキーペアを選択します。
** *ネットワーク設定*：必要に応じてネットワーク設定を編集します。
+
*** 目的のVPCとサブネットを選択します。
*** インスタンスにパブリックIPアドレスを割り当てるかどうかを指定します。
*** コネクタインスタンスに必要な接続方法（SSH、HTTP、HTTPS）を有効にするファイアウォール設定を指定します。
+
特定の構成にはさらにいくつかのルールが必要です。

+
link:reference-ports-aws.html["AWSのセキュリティグループルールを表示します"]。



** *ストレージの設定*：デフォルトのストレージオプションをそのまま使用します。
** *詳細情報*：*[IAMインスタンスプロファイル]*で、コネクタに必要な権限を含むIAMロールを選択します。
** *概要*：概要を確認し、*インスタンスの起動*をクリックします。


+
AWS は、指定した設定でソフトウェアを起動します。コネクタインスタンスとソフトウェアは、約 5 分後に実行される必要があります。

. Connector 仮想マシンに接続されているホストから Web ブラウザを開き、次の URL を入力します。
+
https://_ipaddress_[]

. ログイン後、コネクタを設定します。
+
.. コネクタに関連付けるBlueXPアカウントを指定します。
.. システムの名前を入力します。
.. *では、セキュリティ保護された環境で実行していますか？*制限モードを無効にしたままにします。
+
標準モードでBlueXPを使用する手順について説明しているため、制限モードは無効にしておく必要があります。セキュアな環境でBlueXPバックエンドサービスからこのアカウントを切断する場合にのみ、制限モードを有効にしてください。その場合は、 link:task-quick-start-restricted-mode.html["制限モードでBlueXPの使用を開始するには、次の手順に従います"]。

.. [Let's start]*をクリックします。




.結果
これで、コネクタのインストールとBlueXPアカウントでのセットアップが完了しました。

Webブラウザを開き、にアクセスします https://console.bluexp.netapp.com["BlueXPコンソール"^] BlueXPでコネクタの使用を開始します

--
.手動インストール
--
.作業を開始する前に
次の情報が必要です。

* コネクタをインストールするためのroot権限。
* コネクタからのインターネットアクセスにプロキシが必要な場合は、プロキシサーバに関する詳細。
+
インストール後にプロキシサーバを設定することもできますが、その場合はコネクタを再起動する必要があります。

* プロキシサーバがHTTPSを使用している場合、またはプロキシが代行受信プロキシの場合は、CA署名証明書。


.このタスクについて
NetApp Support Siteで入手できるインストーラは、それよりも古いバージョンの場合があります。インストール後、新しいバージョンが利用可能になると、コネクタは自動的に更新されます。

.手順
. Docker が有効で実行されていることを確認します。
+
[source, cli]
----
sudo systemctl enable docker && sudo systemctl start docker
----
. ホストに_http_proxy_or_https_proxy_system変数が設定されている場合は、削除します。
+
[source, cli]
----
unset http_proxy
unset https_proxy
----
+
これらのシステム変数を削除しないと、インストールは失敗します。

. からConnectorソフトウェアをダウンロードします https://mysupport.netapp.com/site/products/all/details/cloud-manager/downloads-tab["NetApp Support Site"^]をクリックし、 Linux ホストにコピーします。
+
ネットワークまたはクラウドで使用するための「オンライン」コネクタインストーラをダウンロードする必要があります。コネクタには別の「オフライン」インストーラが用意されていますが、プライベートモード展開でのみサポートされています。

. スクリプトを実行する権限を割り当てます。
+
[source, cli]
----
chmod +x OnCommandCloudManager-<version>
----
+
<version> は、ダウンロードしたコネクタのバージョンです。

. インストールスクリプトを実行します。
+
[source, cli]
----
 ./OnCommandCloudManager-<version> --proxy <HTTP or HTTPS proxy server> --cacert <path and file name of a CA-signed certificate>
----
+
--proxyパラメータと--cacert.pemパラメータはオプションです。プロキシサーバがある場合は、次のようにパラメータを入力する必要があります。プロキシに関する情報の入力を求めるプロンプトは表示されません。

+
次に、両方のオプションパラメータを使用したコマンドの例を示します。

+
[source, cli]
----
 ./OnCommandCloudManager-V3.9.26 --proxy https://user:password@10.0.0.30:8080/ --cacert /tmp/cacert/certificate.cer
----
+
--proxyは、次のいずれかの形式を使用してHTTPまたはHTTPSプロキシサーバを使用するようにコネクタを設定します。

+
** \http://address:port
** \http://username:password@address:port
** \https://address:port
** \https://username:password@address:port
+
ユーザはローカルユーザである必要があります。ドメインユーザはサポートされません。



+
--cacertsは、コネクタとプロキシサーバ間のHTTPSアクセスに使用するCA署名証明書を指定しています。このパラメータは、HTTPSプロキシサーバを指定する場合、または代行受信プロキシを指定する場合にのみ必要です。

. インストールが完了するまで待ちます。
+
プロキシサーバを指定した場合は、インストールの終了時にConnectorサービス（occm）が2回再起動されます。

. Connector 仮想マシンに接続されているホストから Web ブラウザを開き、次の URL を入力します。
+
https://_ipaddress_[]

. ログイン後、コネクタを設定します。
+
.. コネクタに関連付けるBlueXPアカウントを指定します。
.. システムの名前を入力します。
.. *では、セキュリティ保護された環境で実行していますか？*制限モードを無効にしたままにします。
+
標準モードでBlueXPを使用する手順について説明しているため、制限モードは無効にしておく必要があります。セキュアな環境でBlueXPバックエンドサービスからこのアカウントを切断する場合にのみ、制限モードを有効にしてください。その場合は、 link:task-quick-start-restricted-mode.html["制限モードでBlueXPの使用を開始するには、次の手順に従います"]。

.. [Let's start]*をクリックします。




.結果
これでコネクタがインストールされ、BlueXPアカウントでセットアップされました。

.次の手順
link:task-provide-permissions-aws.html["以前に設定した権限をBlueXPに付与します"]。

--
====