---
sidebar: sidebar 
permalink: task-install-connector-aws-marketplace.html 
keywords: install connector, aws connector installation, aws connector, install connector in aws, bluexp, aws marketplace, manual install, create connector 
summary: AWS Marketplaceからコネクタを作成するには、ネットワークを設定し、AWS権限を準備し、インスタンス要件を確認してから、コネクタを作成する必要があります。 
---
= AWS Marketplace からコネクタを作成します
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
AWS Marketplaceからコネクタを作成するには、ネットワークを設定し、AWS権限を準備し、インスタンス要件を確認してから、コネクタを作成する必要があります。

.作業を開始する前に
確認が必要です link:reference-limitations.html["コネクタの制限"]。



== 手順1：ネットワークをセットアップする

コネクタをインストールするネットワークの場所が、次の要件をサポートしていることを確認します。これらの要件を満たすことで、コネクタはハイブリッドクラウド環境内のリソースとプロセスを管理できるようになります。

vPCおよびサブネット:: コネクタを作成するときは、コネクタを配置するVPCとサブネットを指定する必要があります。


ターゲットネットワークへの接続:: コネクタには、作業環境を作成および管理する予定の場所へのネットワーク接続が必要です。たとえば、オンプレミス環境にCloud Volumes ONTAPシステムやストレージシステムを作成するネットワークなどです。


アウトバウンドインターネットアクセス:: コネクタを展開するネットワークの場所には、特定のエンドポイントに接続するためのアウトバウンドインターネット接続が必要です。


コネクタから接続されたエンドポイント:: このコネクタは、パブリッククラウド環境内のリソースとプロセスを日常的に管理するために、次のエンドポイントに接続するためのアウトバウンドインターネットアクセスを必要とします。
+
--
[cols="2a,1a"]
|===
| エンドポイント | 目的 


 a| 
AWS サービス（ amazonaws.com ）：

* クラウド形成
* 柔軟なコンピューティングクラウド（ EC2 ）
* IDおよびアクセス管理（IAM）
* キー管理サービス（ KMS ）
* セキュリティトークンサービス（ STS ）
* シンプルなストレージサービス（ S3 ）

 a| 
AWSでリソースを管理できます。正確なエンドポイントは、使用しているAWSリージョンによって異なります。 https://docs.aws.amazon.com/general/latest/gr/rande.html["詳細については、AWSのドキュメントを参照してください"^]



 a| 
\https://support.netapp.com
 a| 
ライセンス情報を取得し、ネットアップサポートに AutoSupport メッセージを送信するため。



 a| 
\https://*.api.bluexp.netapp.com

\https://api.bluexp.netapp.com

\https://*.cloudmanager.cloud.netapp.com

\https://cloudmanager.cloud.netapp.com

\https://netapp-cloud-account.auth0.com
 a| 
BlueXPでSaaSの機能とサービスを提供するため。

コネクタは現在「cloudmanager.cloud.netapp.com"」に連絡していますが、今後のリリースでは「api.bluexp.netapp.com"」に連絡を開始します。



 a| 
\https://*.blob.core.windows.net

\https://cloudmanagerinfraprod.azurecr.io
 a| 
をクリックして、 Connector と Docker コンポーネントをアップグレードします。

|===
--


プロキシサーバ:: すべての送信インターネットトラフィック用にプロキシサーバーを導入する必要がある場合は、HTTPまたはHTTPSプロキシに関する次の情報を取得します。この情報は、インストール時に入力する必要があります。
+
--
* IP アドレス
* クレデンシャル
* HTTPS証明書


--


ポート:: コネクタを起動するか、コネクタがCloud Volumes ONTAPからNetAppサポートにAutoSupportメッセージを送信するためのプロキシとして使用されている場合を除き、コネクタへの受信トラフィックはありません。
+
--
* HTTP （ 80 ）と HTTPS （ 443 ）はローカル UI へのアクセスを提供しますが、これはまれに使用されます。
* SSH （ 22 ）は、トラブルシューティングのためにホストに接続する必要がある場合にのみ必要です。
* アウトバウンドインターネット接続を使用できないサブネットにCloud Volumes ONTAP システムを導入する場合は、ポート3128経由のインバウンド接続が必要です。
+
Cloud Volumes ONTAPシステムでAutoSupportメッセージを送信するためのアウトバウンドインターネット接続が確立されていない場合は、コネクタに付属のプロキシサーバを使用するように自動的に設定されます。唯一の要件は、コネクタのセキュリティグループがポート3128を介したインバウンド接続を許可することです。コネクタを展開した後、このポートを開く必要があります。



--




== 手順2：AWS権限を設定する

Marketplaceの導入に備えて、AWSでIAMポリシーを作成し、IAMロールに関連付けます。AWS Marketplaceからコネクタを作成すると、そのIAMロールを選択するように求められます。

.手順
. AWSコンソールにログインし、IAMサービスに移動します。
. ポリシーを作成します。
+
.. [Policies]>[Create policy]*を選択します。
.. [*json]*を選択し、の内容をコピーして貼り付けます link:reference-permissions-aws.html["コネクタのIAMポリシー"]。
.. 残りの手順を完了してポリシーを作成します。
+
使用するBlueXPサービスによっては、2つ目のポリシーの作成が必要になる場合があります。標準のリージョンでは、権限は2つのポリシーに分散されます。AWSの管理対象ポリシーの最大文字数に制限されているため、2つのポリシーが必要です。 link:reference-permissions-aws.html["コネクタのIAMポリシーの詳細については、こちらを参照してください"]。



. IAMロールを作成します。
+
.. [ロール]>[ロールの作成]*を選択します。
.. [AWS service]>[EC2]*を選択します。
.. 作成したポリシーを適用して権限を追加します。
.. 残りの手順を完了してロールを作成します。




.結果
これで、AWS Marketplaceからの導入時にEC2インスタンスに関連付けることができるIAMロールが作成されました。



== ステップ3：インスタンス要件を確認する

コネクタを作成するときは、次の要件を満たすEC2インスタンスタイプを選択する必要があります。

CPU:: 4 コアまたは 4 個の vCPU
RAM:: 14GB
AWS EC2 インスタンスタイプ:: 上記の CPU と RAM の要件を満たすインスタンスタイプ。t3.xlarge をお勧めします。




== 手順4：コネクタを作成する

AWS Marketplaceからコネクタを直接作成します。

.このタスクについて
AWS Marketplaceからコネクタを作成すると、デフォルト設定を使用してAWSにEC2インスタンスがデプロイされます。 link:reference-connector-default-config.html["コネクタのデフォルト設定について説明します"]。

.作業を開始する前に
次の情報が必要です。

* ネットワーク要件を満たすVPCとサブネット。
* コネクタに必要な権限を含むポリシーが添付されたIAMロール。
* IAMユーザのAWS Marketplaceをサブスクライブおよびサブスクライブ解除する権限。
* インスタンスのCPUとRAMの要件を理解していること。
* EC2インスタンスのキーペア。


.手順
. にアクセスします https://aws.amazon.com/marketplace/pp/B018REK8QG["AWS MarketplaceのBlueXPページ"^]
. [Marketplace]ページで、*[Continue to Subscribe]*を選択し、*[Continue to Configuration]*を選択します。
+
image:screenshot-subscribe-aws.png["AWS Marketplace の Continue to Subscribe and Continue to Configuration ボタンを示すスクリーンショット"]

. デフォルトのオプションを変更して、*[起動を続行]*を選択します。
. [Choose Action]*で、[Launch through EC2]*を選択し、[Launch]*を選択します。
+
以下の手順では、コンソールからEC2コンソールからインスタンスを起動する方法について説明します。これは、IAMロールをコネクタインスタンスに関連付けることができるためです。これは、 * ウェブサイトからの起動 * アクションを使用しては実行できません。

. プロンプトに従って、インスタンスを設定および導入します。
+
** *名前とタグ*：インスタンスの名前とタグを入力します。
** *アプリケーションとOSイメージ*:このセクションは省略します。コネクタAMIはすでに選択されています。
** *インスタンスタイプ*：リージョンの可用性に応じて、RAMとCPUの要件を満たすインスタンスタイプを選択します（T3.xlargeを推奨）。
** *キーペア（ログイン）*：インスタンスへのセキュアな接続に使用するキーペアを選択します。
** *ネットワーク設定*：必要に応じてネットワーク設定を編集します。
+
*** 目的のVPCとサブネットを選択します。
*** インスタンスにパブリックIPアドレスを割り当てるかどうかを指定します。
*** コネクタインスタンスに必要な接続方法（SSH、HTTP、HTTPS）を有効にするファイアウォール設定を指定します。
+
特定の構成にはさらにいくつかのルールが必要です。

+
link:reference-ports-aws.html["AWSのセキュリティグループルールを表示します"]。



** *ストレージの構成*：ルートボリュームのデフォルトサイズとディスクタイプを維持します。
+
ルートボリュームでAmazon EBS暗号化を有効にする場合は、*[アドバンスト]*を選択し、*[ボリューム1]*を展開して*[暗号化]*を選択し、KMSキーを選択します。

** *詳細情報*：*[IAMインスタンスプロファイル]*で、コネクタに必要な権限を含むIAMロールを選択します。
** *概要*：概要を確認し、*インスタンスの起動*を選択します。


+
AWS は、指定した設定でソフトウェアを起動します。コネクタインスタンスとソフトウェアは、約 5 分後に実行される必要があります。

. Connector 仮想マシンに接続されているホストから Web ブラウザを開き、次の URL を入力します。
+
https://_ipaddress_[]

. ログイン後、コネクタを設定します。
+
.. コネクタに関連付けるBlueXPアカウントを指定します。
.. システムの名前を入力します。
.. *では、セキュリティ保護された環境で実行していますか？*制限モードを無効にしたままにします。
+
標準モードでBlueXPを使用する手順について説明しているため、制限モードは無効にしておく必要があります。セキュアな環境でBlueXPバックエンドサービスからこのアカウントを切断する場合にのみ、制限モードを有効にしてください。その場合は、 link:task-quick-start-restricted-mode.html["制限モードでBlueXPの使用を開始するには、次の手順に従います"]。

.. [* Let's start]*を選択します。




.結果
これで、コネクタのインストールとBlueXPアカウントでのセットアップが完了しました。

Webブラウザを開き、にアクセスします https://console.bluexp.netapp.com["BlueXPコンソール"^] BlueXPでコネクタの使用を開始します
