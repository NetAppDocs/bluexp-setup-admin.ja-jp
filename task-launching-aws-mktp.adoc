---
sidebar: sidebar 
permalink: task-launching-aws-mktp.html 
keywords: install connector, create connector, deploy connector, installation, installing, marketplace, aws, launch, launching, ec2 console, iam role, govcloud, government, aws government, aws govcloud, gov marketplace 
summary: AWSの商業地域では、BlueXPからコネクタを直接作成することをお勧めしますが、必要に応じてAWS Marketplaceからコネクタを起動することもできます。AWS政府の地域では、BlueXP SaaS Webサイトから政府機関にConnectorを導入することはできないため、次はAWS Marketplaceから導入することをお勧めします。 
---
= AWS Marketplace からコネクタを作成します
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
AWSの商業地域では、BlueXPからコネクタを直接作成することをお勧めしますが、必要に応じてAWS Marketplaceからコネクタを起動することもできます。AWS政府の地域では、BlueXP SaaS Webサイトから政府機関にConnectorを導入することはできないため、次はAWS Marketplaceから導入することをお勧めします。


TIP: ネットワーク内またはクラウド内の既存のLinuxホストにConnectorソフトウェアをダウンロードしてインストールすることもできます。 link:task-installing-linux.html["既存のLinuxホストにConnectorをインストールする方法について説明します"]。



== AWSの商業地域にコネクタを作成します

Connectorインスタンスは、AWS Marketplace for BlueXPから直接、AWSの商業地域で起動できます。

.始める前に
Connectorを作成するIAMユーザには、サブスクライブとサブスクライブ解除を行うためのAWS Marketplace権限が必要です。

.手順
. AWSで権限を設定します。
+
.. IAMコンソールで、の内容をコピーして貼り付け、必要なポリシーを作成します link:reference-permissions-aws.html["コネクタのIAMポリシー"]。
.. タイプがAmazon EC2のIAMロールを作成し、前の手順で作成したポリシーをそのロールに関連付けます。


. にアクセスします https://aws.amazon.com/marketplace/pp/B018REK8QG["AWS MarketplaceのBlueXPページ"^] AMIからコネクタを導入するには、次の手順を実行します。
. [Marketplace] ページで [* Continue to Subscribe* ] をクリックし、 [* Continue to Configuration* ] をクリックします。
+
image:screenshot_subscribe_cm.gif["AWS Marketplace の Continue to Subscribe and Continue to Configuration ボタンを示すスクリーンショット"]

. デフォルトのオプションを変更し、 [* Continue to Launch] をクリックします。
. [ アクションの選択 *] で [* EC2 で起動 ] を選択し、 [* 起動 *] をクリックします。
+
以下の手順では、コンソールからEC2コンソールからインスタンスを起動する方法について説明します。これは、IAMロールをコネクタインスタンスに関連付けることができるためです。これは、 * ウェブサイトからの起動 * アクションを使用しては実行できません。

. プロンプトに従って、インスタンスを設定および導入します。
+
** *名前とタグ*：インスタンスの名前とタグを入力します。
** *アプリケーションとOSイメージ*:このセクションは省略します。コネクタAMIはすでに選択されています。
** * Instance type *：リージョンの可用性に応じて、サポートされているインスタンスタイプ（t3.xlargeを推奨）のいずれかを選択します。
+
link:task-installing-linux.html["インスタンスの要件を確認します"]。

** *キーペア（ログイン）*：インスタンスへのセキュアな接続に使用するキーペアを選択します。
** *ネットワーク設定*：必要に応じてネットワーク設定を編集します。
+
*** 目的のVPCとサブネットを選択します。
*** インスタンスにパブリックIPアドレスを割り当てるかどうかを指定します。
*** コネクタインスタンスに必要な接続方法（SSH、HTTP、HTTPS）を有効にするファイアウォール設定を指定します。


** *ストレージの設定*：デフォルトのストレージオプションをそのまま使用します。
** *詳細*：「* IAM instance profile *」で、手順1で作成したIAMロールを選択します。
** *概要*：概要を確認し、*インスタンスの起動*をクリックします。
+
AWS は、指定した設定でソフトウェアを起動します。コネクタインスタンスとソフトウェアは、約 5 分後に実行される必要があります。



. コネクタインスタンスに接続されているホストから Web ブラウザを開き、次の URL を入力します。
+
https://_ipaddress_[]

. ログイン後、コネクタを設定します。
+
.. コネクタに関連付けるネットアップアカウントを指定します。
+
link:concept-netapp-accounts.html["ネットアップアカウントについて"]。

.. システムの名前を入力します。
+
image:screenshot_set_up_cloud_manager.gif["ネットアップアカウントを選択してシステムに名前を付けることができるコネクタのセットアップ画面のスクリーンショット。"]



. Web ブラウザを開き、に進みます https://console.bluexp.netapp.com[] BlueXPでコネクタの使用を開始します


.結果
これで、 Connector のインストールとセットアップが完了しました。新しい作業環境を作成するときに、BlueXPではこのコネクタが自動的に使用されます。ただし、コネクタが複数ある場合は、が必要です link:task-managing-connectors.html["スイッチを切り替えます"]。

Connectorを作成したのと同じAWSアカウントにAmazon S3バケットがある場合、Amazon S3の作業環境がCanvasに自動的に表示されます。 link:task-viewing-amazon-s3.html["この作業環境でできることの詳細については、こちらをご覧ください"]。



== AWSリージョンにコネクタを作成します

ConnectorをAWS Governmentリージョンに導入するには、EC2サービスにアクセスして、AWS MarketplaceからBlueXP製品を選択する必要があります。

.手順
. AWSで権限を設定します。
+
.. IAMコンソールで、の内容をコピーして貼り付け、独自のポリシーを作成します link:reference-permissions-aws.html["コネクタのIAMポリシー"]。
.. ロールタイプが Amazon EC2 の IAM ロールを作成し、前の手順で作成したポリシーをロールに付加します。


. AWS MarketplaceのBlueXP製品にアクセスします。
+
IAM ユーザがサブスクライブとサブスクライブ解除を行うには、 AWS Marketplace の権限が必要です。

+
.. EC2サービスを開き、*インスタンスの起動*を選択します。
.. 「AWS Marketplace *」を選択します。
.. BlueXPを検索して、製品を選択します。
+
image:screenshot-gov-cloud-mktp.png["AWS Marketplaceで検索したBlueXP製品を示すスクリーンショット"]

.. [* Continue （続行） ] をクリックします


. プロンプトに従って、インスタンスを設定および導入します。
+
** *インスタンスタイプを選択*：リージョンの可用性に応じて、サポートされているインスタンスタイプ（t3.xlargeを推奨）のいずれかを選択します。
+
link:task-installing-linux.html["インスタンスの要件を確認します"]。

** * Configure Instance Details*：VPCとサブネットを選択し、手順1で作成したIAMロールを選択して、終了保護を有効にし（推奨）、要件を満たす他の設定オプションを選択します。
+
image:screenshot_aws_iam_role.gif["AWS の Configure Instance ページのフィールドを示すスクリーンショット。手順 1 で作成する必要のある IAM ロールが選択されている。"]

** * Add Storage* ：デフォルトのストレージ・オプションをそのまま使用します。
** * Add Tags* ：必要に応じて、インスタンスのタグを入力します。
** * セキュリティグループの設定 * ：コネクタインスタンスに必要な接続方法（ SSH 、 HTTP 、 HTTPS ）を指定します。
** * 復習 * ：選択内容を確認して、 * 起動 * をクリックします。


+
AWS は、指定した設定でソフトウェアを起動します。コネクタインスタンスとソフトウェアは、約 5 分後に実行される必要があります。

. コネクタインスタンスに接続されているホストから Web ブラウザを開き、次の URL を入力します。
+
https://_ipaddress_[]

. ログイン後、コネクタを設定します。
+
.. コネクタに関連付けるネットアップアカウントを指定します。
+
link:concept-netapp-accounts.html["ネットアップアカウントについて"]。

.. システムの名前を入力します。
+
image:screenshot_set_up_cloud_manager.gif["ネットアップアカウントを選択してシステムに名前を付けることができるコネクタのセットアップ画面のスクリーンショット。"]





.結果
これで、 Connector のインストールとセットアップが完了しました。

BlueXPを使用する場合は、Webブラウザを開いてコネクタインスタンスのIPアドレスに接続します。 https://_ipaddress_[]

コネクタは政府機関に導入されているため、からはアクセスできません https://console.bluexp.netapp.com[]。



== AutoSupport メッセージのポート3128を開きます

アウトバウンドインターネット接続が使用できないサブネットにCloud Volumes ONTAP システムを導入する場合、BlueXPは自動的にコネクタをプロキシサーバとして使用するようにCloud Volumes ONTAP を設定します。

唯一の要件は、コネクタのセキュリティグループがポート3128で_ inbound_connectionsを許可することです。コネクタを展開した後、このポートを開く必要があります。

Cloud Volumes ONTAP にデフォルトのセキュリティグループを使用する場合、そのセキュリティグループに対する変更は必要ありません。ただし、Cloud Volumes ONTAP に厳密なアウトバウンドルールを定義する場合は、Cloud Volumes ONTAP セキュリティグループがポート3128で_OUTBOUND接続を許可することも必要です。
