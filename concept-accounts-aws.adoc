---
sidebar: sidebar 
permalink: concept-accounts-aws.html 
keywords: cloud provider accounts, aws, aws accounts, keys, multiple accounts, permissions, aws permissions, policy, policies, json 
summary: BlueXPでは、Cloud Volumes ONTAP の導入時に使用するAWSクレデンシャルを選択できます。すべての Cloud Volumes ONTAP システムは、初期の AWS クレデンシャルを使用して導入することも、クレデンシャルを追加することもできます。 
---
= AWS のクレデンシャルと権限
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
BlueXPでは、Cloud Volumes ONTAP の導入時に使用するAWSクレデンシャルを選択できます。すべての Cloud Volumes ONTAP システムは、初期の AWS クレデンシャルを使用して導入することも、クレデンシャルを追加することもできます。



== AWS の初期クレデンシャル

BlueXPからコネクタを展開する場合は、IAMロールのARNまたはIAMユーザのアクセスキーを指定する必要があります。使用する認証方式に、 Connector インスタンスを AWS に導入するための必要な権限がある必要があります。必要な権限は、に表示されます link:task-creating-connectors-aws.html["AWS 用のコネクタ導入ポリシー"]。

BlueXPがAWSでコネクタインスタンスを起動すると、インスタンスのIAMロールとインスタンスプロファイルが作成されます。また、ポリシーを適用して、指定した AWS アカウント内のリソースやプロセスを管理する権限を Connector に提供します。 link:reference-permissions-aws.html["BlueXPがどのように権限を使用しているかを確認します"]。

image:diagram_permissions_initial_aws.png["BlueXPがConnectorをAWSアカウントに導入する様子を示す概念図。IAMポリシーは、BlueXPインスタンスに関連付けられているIAMロールに割り当てられている。"]

Cloud Volumes ONTAP 用の新しい作業環境を作成すると、デフォルトで次のAWSクレデンシャルが選択されます。

image:screenshot_accounts_select_aws.gif["Details  Credentials ページに Switch Account オプションを示すスクリーンショット。"]



== 追加の AWS クレデンシャル

AWS クレデンシャルを追加する方法は 2 種類あります。



=== AWS クレデンシャルを既存のコネクタに追加する

別々の AWS アカウントで Cloud Volumes ONTAP を起動する場合は、どちらかを実行します link:task-adding-aws-accounts.html["IAM ユーザまたは ARN に AWS キーを指定します 信頼できるアカウントのロール"]。次の図は、 2 つの追加アカウントを示しています。 1 つは、信頼されたアカウントの IAM ロールを介してアクセス許可を提供し、もう 1 つは IAM ユーザの AWS キーを使用してアクセス許可を提供します。

image:diagram_permissions_multiple_aws.png["2 つの追加アカウントを示す概念図。各には IAM ポリシーが 1 つあり、 1 つは IAM ユーザに関連付けられ、もう 1 つは IAM ロールに関連付けられている。」"]

そのあとで link:task-adding-aws-accounts.html#adding-aws-accounts-to-cloud-manager["アカウントの資格情報をBlueXPに追加します"] IAM ロールの Amazon リソース名（ ARN ）、または IAM ユーザの AWS キーを指定します。

クレデンシャルを追加したら、新しい作業環境を作成するときにクレデンシャルに切り替えることができます。

image:screenshot_accounts_switch_aws.png["[ 詳細と資格情報 ] ページで [ アカウントの切り替え ] をクリックした後に、クラウドプロバイダアカウントを選択する方法を示すスクリーンショット。"]



=== AWSクレデンシャルをBlueXPに直接追加します

BlueXPに新しいAWS資格情報を追加すると'FSX for ONTAP 作業環境の作成と管理'またはコネクタの作成に必要な権限が提供されます



== 市場への導入とオンプレミスの導入についてはどうでしょうか。

上記の項では、BlueXPのコネクタの推奨される展開方法について説明します。から AWS に Connector を導入することもできます link:task-launching-aws-mktp.html["AWS Marketplace"] また、次のことも可能です link:task-installing-linux.html["コネクタをオンプレミスにインストールします"]。

Marketplace を使用する場合も、アクセス許可は同じ方法で提供されます。IAM ロールを手動で作成して設定し、追加のアカウントに権限を付与するだけで済みます。

オンプレミス環境では、BlueXPシステム用にIAMロールを設定することはできませんが、追加のAWSアカウントの場合と同様に権限を付与することはできます。



== AWS クレデンシャルを安全にローテーションするにはどうすればよいですか。

前述のように、BlueXPではいくつかの方法でAWSクレデンシャルを提供できます。コネクタインスタンスに関連付けられたIAMロールでは、信頼されたアカウントでIAMロールを割り当てるか、AWSアクセスキーを提供します。

最初の2つのオプションでは、BlueXPはAWS Security Token Serviceを使用して、絶えず回転する一時的な資格情報を取得します。このプロセスはベストプラクティスであり、自動的に実行され、セキュリティが確保されています。

BlueXPにAWSアクセスキーを提供する場合は、BlueXPで定期的にキーを更新して、キーを回転させる必要があります。これは完全に手動で行います。
