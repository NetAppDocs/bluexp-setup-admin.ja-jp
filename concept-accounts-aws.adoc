---
sidebar: sidebar 
permalink: concept-accounts-aws.html 
keywords: cloud provider accounts, aws, aws accounts, keys, multiple accounts, permissions, aws permissions, policy, policies, credentials 
summary: BlueXPがAWSのクレデンシャルと権限を使用してユーザに代わって操作を実行する方法をご紹介します。これらの詳細を理解しておくと、BlueXPで1つ以上のAWSアカウントのクレデンシャルを管理する際に役立ちます。たとえば、AWSクレデンシャルをBlueXPに追加するタイミングを把握できます。 
---
= AWS のクレデンシャルと権限
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
BlueXPがAWSのクレデンシャルと権限を使用してユーザに代わって操作を実行する方法をご紹介します。これらの詳細を理解しておくと、BlueXPで1つ以上のAWSアカウントのクレデンシャルを管理する際に役立ちます。たとえば、AWSクレデンシャルをBlueXPに追加するタイミングを把握できます。



== AWS の初期クレデンシャル

BlueXPからコネクタを展開する場合は、IAMロールのARNまたはIAMユーザのアクセスキーを指定する必要があります。使用する認証方式に、 Connector インスタンスを AWS に導入するための必要な権限がある必要があります。必要な権限は、に表示されます link:task-set-up-permissions-aws.html["AWS 用のコネクタ導入ポリシー"]。

BlueXPがAWSでコネクタインスタンスを起動すると、インスタンスのIAMロールとインスタンスプロファイルが作成されます。また、ポリシーを適用して、指定した AWS アカウント内のリソースやプロセスを管理する権限を Connector に提供します。 link:reference-permissions-aws.html["BlueXPがどのように権限を使用しているかを確認します"]。

image:diagram_permissions_initial_aws.png["BlueXPがConnectorをAWSアカウントに導入する様子を示す概念図。IAMポリシーは、BlueXPインスタンスに関連付けられているIAMロールに割り当てられている。"]

Cloud Volumes ONTAP 用の新しい作業環境を作成すると、デフォルトで次のAWSクレデンシャルが選択されます。

image:screenshot_accounts_select_aws.gif["Details  Credentials ページに Switch Account オプションを示すスクリーンショット。"]

すべての Cloud Volumes ONTAP システムは、初期の AWS クレデンシャルを使用して導入することも、クレデンシャルを追加することもできます。



== 追加の AWS クレデンシャル

AWSクレデンシャルを追加するには、次の2つの方法があります。

* 既存のコネクタにAWSクレデンシャルを追加できます
* AWSクレデンシャルはBlueXPに直接追加できます


詳細については、以下のセクションを参照してください。



=== AWS クレデンシャルを既存のコネクタに追加する

Cloud Volumes ONTAP を別の AWS アカウントで起動する場合は、 IAM ユーザに AWS キーを提供するか、信頼されたアカウントのロールの ARN を提供します。次の図は、 2 つの追加アカウントを示しています。 1 つは、信頼されたアカウントの IAM ロールを介してアクセス許可を提供し、もう 1 つは IAM ユーザの AWS キーを使用してアクセス許可を提供します。

image:diagram_permissions_multiple_aws.png["2 つの追加アカウントを示す概念図。各には IAM ポリシーが 1 つあり、 1 つは IAM ユーザに関連付けられ、もう 1 つは IAM ロールに関連付けられている。」"]

その後、IAMロールのAmazon Resource Name（ARN）またはIAMユーザのAWSキーを指定して、アカウントクレデンシャルをBlueXPに追加します。

クレデンシャルを追加したら、新しい作業環境を作成するときにクレデンシャルに切り替えることができます。

image:screenshot_accounts_switch_aws.png["[ 詳細と資格情報 ] ページで [ アカウントの切り替え ] をクリックした後に、クラウドプロバイダアカウントを選択する方法を示すスクリーンショット。"]

link:task-adding-aws-accounts.html#add-credentials-to-a-connector["既存のコネクタにAWSクレデンシャルを追加する方法を説明します。"]



=== AWSクレデンシャルをBlueXPに直接追加します

BlueXPに新しいAWS資格情報を追加すると'FSX for ONTAP 作業環境の作成と管理'またはコネクタの作成に必要な権限が提供されます

* link:task-adding-aws-accounts.html#add-credentials-to-bluexp-for-creating-a-connector["BlueXP for Amazon FSx for ONTAP にAWSクレデンシャルを追加する方法をご紹介します"^]
* link:task-adding-aws-accounts.html#add-credentials-to-a-connector["コネクタを作成するためにAWSクレデンシャルをBlueXPに追加する方法について説明します"]




== 市場への導入とオンプレミスの導入についてはどうでしょうか。

上記の項では、BlueXPのコネクタの推奨される展開方法について説明します。AWS MarketplaceからAWSにコネクタを導入したり、独自のLinuxホストにコネクタソフトウェアを手動でインストールしたりすることもできます。

Marketplace を使用する場合も、アクセス許可は同じ方法で提供されます。IAM ロールを手動で作成して設定し、追加のアカウントに権限を付与するだけで済みます。

オンプレミス環境の場合、BlueXPシステム用のIAMロールを設定することはできませんが、AWSアクセスキーを使用して権限を指定することはできます。

権限の設定方法については、次のページを参照してください。

* 標準モード
+
** link:task-set-up-permissions-aws.html["AWS権限を設定"]
** link:task-set-up-permissions-on-prem.html["オンプレミス環境のクラウド権限を設定"]


* link:task-prepare-restricted-mode.html#prepare-cloud-permissions["制限モードにクラウド権限を設定する"]
* link:task-prepare-private-mode.html#prepare-cloud-permissions["プライベートモードのクラウド権限を設定します"]




== AWS クレデンシャルを安全にローテーションするにはどうすればよいですか。

前述のように、BlueXPではいくつかの方法でAWSクレデンシャルを提供できます。コネクタインスタンスに関連付けられたIAMロールでは、信頼されたアカウントでIAMロールを割り当てるか、AWSアクセスキーを提供します。

最初の2つのオプションでは、BlueXPはAWS Security Token Serviceを使用して、絶えず回転する一時的な資格情報を取得します。このプロセスはベストプラクティスであり、自動的に実行され、セキュリティが確保されています。

BlueXPにAWSアクセスキーを提供する場合は、BlueXPで定期的にキーを更新して、キーを回転させる必要があります。これは完全に手動で行います。
